<!doctype html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>EngLift ‚Äî —É—á–∏ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π</title>
    <meta name="theme-color" content="#6C63FF" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-title" content="EngLift" />
    <link rel="stylesheet" href="style.css" />
    <link rel="manifest" href="manifest.json" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js"></script>
    <script src="api.js"></script>
    <script type="module" src="main.js"></script>
  </head>
  <body>
    <!-- AUTH GATE - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è -->
    <div class="auth-gate" id="auth-gate">
      <div class="auth-gate-container">
        <div class="auth-gate-logo">
          <div class="logo">Eng<span>Lift</span></div>
        </div>
        <div class="auth-gate-subtitle">
          –í–∞—à –ª–∏—á–Ω—ã–π —Ç—Ä–µ–Ω–µ—Ä –ø–æ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º—É —è–∑—ã–∫—É
        </div>

        <div class="form-group">
          <label>Email</label>
          <input
            class="form-control"
            type="email"
            id="gate-email"
            placeholder="you@example.com"
            autocomplete="email"
          />
        </div>

        <div class="form-group">
          <label>–ü–∞—Ä–æ–ª—å</label>
          <div class="password-field-wrapper">
            <input
              class="form-control"
              type="password"
              id="gate-password"
              placeholder="–ú–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤"
              autocomplete="current-password"
            />
            <button
              type="button"
              class="password-toggle"
              id="gate-password-toggle"
            >
              üëÅÔ∏è
            </button>
          </div>
        </div>

        <div class="form-group" id="gate-confirm-group" style="display: none">
          <label>–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å</label>
          <div class="password-field-wrapper">
            <input
              class="form-control"
              type="password"
              id="gate-confirm-password"
              placeholder="–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–∞—Ä–æ–ª—å"
              autocomplete="new-password"
            />
            <button
              type="button"
              class="password-toggle"
              id="gate-confirm-toggle"
            >
              üëÅÔ∏è
            </button>
          </div>
        </div>

        <div
          id="gate-error"
          style="
            color: var(--danger);
            font-size: 0.85rem;
            font-weight: 700;
            min-height: 1.2rem;
            margin-bottom: 0.75rem;
          "
        ></div>

        <div style="display: flex; flex-direction: column; gap: 0.75rem">
          <button
            class="btn btn-primary btn-lg"
            style="width: 100%"
            id="gate-submit-btn"
          >
            –í–æ–π—Ç–∏
          </button>

          <button
            class="btn btn-secondary"
            style="width: 100%"
            id="gate-toggle-btn"
          >
            –ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
          </button>
        </div>
      </div>
    </div>

    <header>
      <div class="logo">Eng<span>Lift</span></div>
      <nav>
        <button class="nav-btn active" data-tab="words">
          üìö –°–ª–æ–≤–∞—Ä—å
          <span class="badge" id="words-count">0</span>
        </button>
        <button class="nav-btn" data-tab="practice">
          üéØ –ü—Ä–∞–∫—Ç–∏–∫–∞
          <span class="badge" id="due-count">0</span>
        </button>
        <button class="nav-btn" data-tab="stats">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</button>
        <button class="nav-btn" data-tab="add">‚ûï –î–æ–±–∞–≤–∏—Ç—å</button>
      </nav>
      <div class="xp-container">
        <span
          style="font-size: 0.7rem; color: var(--muted); white-space: nowrap"
          id="xp-num"
          >0/100</span
        >
      </div>
      <div class="header-right">
        <div
          id="user-info"
          style="
            display: none;
            margin-right: 1rem;
            padding: 0.5rem 1rem;
            background: var(--bg-secondary);
            border-radius: 10px;
            font-size: 0.9rem;
          "
        >
          <span id="user-email"></span>
          <span
            id="user-status"
            style="margin-left: 0.5rem; font-size: 0.8rem"
          ></span>
        </div>
        <button
          class="sync-btn"
          id="sync-indicator"
          title="–°—Ç–∞—Ç—É—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏"
        >
          <span class="sync-icon" id="sync-icon">üîÑ</span>
        </button>
        <button class="btn btn-secondary btn-sm" id="export-btn">
          ‚¨áÔ∏è –≠–∫—Å–ø–æ—Ä—Ç
        </button>
        <button class="btn btn-primary btn-sm" id="import-btn">
          ‚¨ÜÔ∏è –ò–º–ø–æ—Ä—Ç
        </button>
        <button class="btn btn-secondary btn-sm" id="auth-btn">–í–æ–π—Ç–∏</button>
        <button class="dark-btn" id="dark-toggle">üåô</button>
      </div>
    </header>

    <main>
      <!-- TAB: WORDS -->
      <div class="tab-pane active" id="tab-words">
        <div class="section-title">
          –ú–æ–∏ —Å–ª–æ–≤–∞ <span class="section-subtitle" id="words-subtitle"></span>
        </div>
        <div class="no-speech" id="no-speech-banner">
          ‚ö†Ô∏è –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–∏–Ω—Ç–µ–∑ —Ä–µ—á–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ Chrome.
        </div>
        <div id="wotd-wrap"></div>
        <div class="words-toolbar">
          <input
            class="form-control"
            id="search-input"
            type="text"
            placeholder="üîç –ü–æ–∏—Å–∫..."
            autocomplete="off"
            autocorrect="off"
            spellcheck="false"
            name="q"
            data-form-type="search"
            aria-label="–ü–æ–∏—Å–∫ —Å–ª–æ–≤"
          />
          <div class="filter-pills">
            <button class="pill active" data-filter="all">–í—Å–µ</button>
            <button class="pill" data-filter="learning">–£—á—É</button>
            <button class="pill" data-filter="learned">–ó–Ω–∞—é ‚úÖ</button>
          </div>
          <select id="sort-select" class="sort-select" title="–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞">
            <option value="date-desc">üïê –ù–æ–≤—ã–µ</option>
            <option value="date-asc">üïê –°—Ç–∞—Ä—ã–µ</option>
            <option value="alpha-asc">üî§ A ‚Üí Z</option>
            <option value="alpha-desc">üî§ Z ‚Üí A</option>
            <option value="progress-asc">üí™ –°–ª–æ–∂–Ω—ã–µ</option>
            <option value="progress-desc">‚úÖ –õ—ë–≥–∫–∏–µ</option>
          </select>
        </div>
        <div id="words-grid" class="words-grid"></div>
        <div
          id="load-more-trigger"
          style="height: 1px; width: 100%; visibility: hidden"
        ></div>
        <div
          id="loading-more"
          style="display: none; text-align: center; padding: 1rem"
        >
          <div class="loading-spinner"></div>
          –ó–∞–≥—Ä—É–∂–∞–µ–º –µ—â—ë...
        </div>
        <div
          id="empty-words"
          style="
            display: none;
            text-align: center;
            padding: 3rem;
            color: var(--muted);
          "
        >
          <h3>–°–ª–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç</h3>
          <p>–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤–æ–µ —Å–ª–æ–≤–æ, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å —É—á–∏—Ç—å –∞–Ω–≥–ª–∏–π—Å–∫–∏–π!</p>
          <br />
          <button class="btn btn-primary btn-lg" onclick="switchTab('add')">
            ‚ûï –î–æ–±–∞–≤–∏—Ç—å —Å–ª–æ–≤–∞
          </button>
        </div>
      </div>

      <!-- TAB: ADD -->
      <div class="tab-pane" id="tab-add">
        <div class="section-title">–î–æ–±–∞–≤–∏—Ç—å —Å–ª–æ–≤–∞</div>
        <div class="add-layout">
          <div class="add-card">
            <h3>‚úèÔ∏è –û–¥–Ω–æ —Å–ª–æ–≤–æ</h3>
            <form id="single-form">
              <div class="form-group">
                <label>–ê–Ω–≥–ª–∏–π—Å–∫–æ–µ —Å–ª–æ–≤–æ *</label>
                <div style="display: flex; gap: 0.5rem">
                  <input
                    class="form-control"
                    type="text"
                    id="f-en"
                    required
                    placeholder="e.g. achieve"
                    autocomplete="off"
                  />
                  <button
                    type="button"
                    class="btn btn-secondary"
                    id="auto-fill-btn"
                    title="–ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–∞ –∏ –ø—Ä–∏–º–µ—Ä–∞"
                  >
                    ü™Ñ
                  </button>
                </div>
                <div
                  id="api-loading"
                  style="
                    display: none;
                    margin-top: 0.5rem;
                    font-size: 0.85rem;
                    color: var(--primary);
                  "
                >
                  <div
                    class="loading-spinner"
                    style="width: 16px; height: 16px; margin-right: 0.5rem"
                  ></div>
                  –ü–æ–ª—É—á–∞—é –¥–∞–Ω–Ω—ã–µ...
                </div>
              </div>
              <div class="form-group">
                <label>–ü–µ—Ä–µ–≤–æ–¥ *</label
                ><input
                  class="form-control"
                  type="text"
                  id="f-ru"
                  required
                  placeholder="e.g. –¥–æ—Å—Ç–∏–≥–∞—Ç—å"
                  autocomplete="off"
                />
              </div>
              <div class="form-group">
                <label>–ü—Ä–∏–º–µ—Ä (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label
                ><input
                  class="form-control"
                  type="text"
                  id="f-ex"
                  placeholder="I want to achieve my goals"
                  autocomplete="off"
                />
              </div>
              <div class="form-group">
                <label>–¢–µ–≥–∏ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é</label
                ><input
                  class="form-control"
                  type="text"
                  id="f-tags"
                  placeholder="verbs, important"
                  autocomplete="off"
                />
              </div>
              <button
                type="submit"
                class="btn btn-primary btn-lg"
                style="width: 100%"
              >
                ‚ûï –î–æ–±–∞–≤–∏—Ç—å —Å–ª–æ–≤–æ
              </button>
            </form>
          </div>
          <div style="display: flex; flex-direction: column; gap: 1.5rem">
            <div class="add-card">
              <h3>üìã –°–ø–∏—Å–æ–∫ —Ç–µ–∫—Å—Ç–æ–º</h3>
              <div class="form-group">
                <label>–§–æ—Ä–º–∞—Ç: <code>—Å–ª–æ–≤–æ - –ø–µ—Ä–µ–≤–æ–¥</code></label>
                <textarea
                  id="bulk-text"
                  class="form-control"
                  placeholder="achieve - –¥–æ—Å—Ç–∏–≥–∞—Ç—å&#10;boundary - –≥—Ä–∞–Ω–∏—Ü–∞&#10;challenge - –≤—ã–∑–æ–≤"
                ></textarea>
              </div>
              <div
                id="bulk-preview-wrap"
                style="display: none"
                class="preview-wrap"
              >
                <table class="preview-table">
                  <thead>
                    <tr>
                      <th>‚úì</th>
                      <th>English</th>
                      <th>–†—É—Å—Å–∫–∏–π</th>
                    </tr>
                  </thead>
                  <tbody id="bulk-tbody"></tbody>
                </table>
              </div>
              <div style="display: flex; gap: 0.5rem; margin-top: 0.75rem">
                <button class="btn btn-secondary" id="parse-bulk-btn">
                  üëÅ –ü—Ä–µ–≤—å—é
                </button>
                <button
                  class="btn btn-primary"
                  id="import-bulk-btn"
                  style="display: none"
                >
                  ‚úÖ –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å
                </button>
              </div>
            </div>
            <div class="add-card">
              <h3>üìÇ –§–∞–π–ª (.csv / .xlsx)</h3>
              <div class="drop-zone" id="drop-zone">
                <div class="dz-icon">üìÅ</div>
                <p>–ü–µ—Ä–µ—Ç–∞—â–∏ —Ñ–∞–π–ª —Å—é–¥–∞ –∏–ª–∏ –Ω–∞–∂–º–∏ –¥–ª—è –≤—ã–±–æ—Ä–∞</p>
                <p style="font-size: 0.8rem; margin-top: 0.3rem">
                  –ö–æ–ª–æ–Ω–∫–∏: A=English, B=–†—É—Å—Å–∫–∏–π, C=–ü—Ä–∏–º–µ—Ä
                </p>
              </div>
              <input
                class="form-control"
                type="file"
                id="file-input"
                accept=".csv,.xlsx"
                style="display: none"
              />
              <div
                id="file-preview-wrap"
                style="display: none; margin-top: 1rem"
                class="preview-wrap"
              >
                <table class="preview-table">
                  <thead>
                    <tr>
                      <th>‚úì</th>
                      <th>English</th>
                      <th>–†—É—Å—Å–∫–∏–π</th>
                      <th>–ü—Ä–∏–º–µ—Ä</th>
                    </tr>
                  </thead>
                  <tbody id="file-tbody"></tbody>
                </table>
              </div>
              <button
                class="btn btn-primary"
                id="import-file-btn"
                style="display: none; margin-top: 0.75rem; width: 100%"
              >
                ‚úÖ –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- TAB: PRACTICE -->
      <div class="tab-pane" id="tab-practice">
        <div class="practice-wrap">
          <div class="setup-card" id="practice-setup">
            <h2>üéØ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏</h2>
            <div class="setup-row">
              <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ª–æ–≤</label>
              <div class="chip-group">
                <button class="chip on" data-count="5">5</button>
                <button class="chip" data-count="10">10</button>
                <button class="chip" data-count="20">20</button>
                <button class="chip" data-count="all">–í—Å–µ</button>
              </div>
            </div>
            <div class="setup-row">
              <label>–¢–∏–ø —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π</label>
              <label class="check-row"
                ><input type="checkbox" data-ex="flash" checked /> üÉè
                –§–ª–µ—à-–∫–∞—Ä—Ç–æ—á–∫–∏</label
              >
              <label class="check-row"
                ><input type="checkbox" data-ex="multi" checked /> üéØ
                –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä</label
              >
              <label class="check-row"
                ><input type="checkbox" data-ex="type" checked /> ‚å®Ô∏è –ù–∞–ø–∏—à–∏
                –ø–µ—Ä–µ–≤–æ–¥</label
              >
              <label class="check-row"
                ><input type="checkbox" data-ex="dictation" /> üîä –î–∏–∫—Ç–∞–Ω—Ç
                (—Å–ª—É—à–∞–π –∏ –ø–∏—à–∏)</label
              >
              <label class="check-row"
                ><input type="checkbox" data-ex="speech" /> üé§ –ü—Ä–æ–∏–∑–Ω–µ—Å–∏ –≤—Å–ª—É—Ö
                (Speech Recognition)</label
              >
              <label class="check-row"
                ><input type="checkbox" data-ex="match" /> üß© –ù–∞–π–¥–∏ –ø–∞—Ä—ã
                (Match)</label
              >
            </div>
            <div class="setup-row">
              <label>–°–ª–æ–≤–∞ –¥–ª—è –ø—Ä–∞–∫—Ç–∏–∫–∏</label>
              <div class="chip-group">
                <button class="chip on" data-filter-w="all">–í—Å–µ</button>
                <button class="chip" data-filter-w="learning">
                  –¢–æ–ª—å–∫–æ —É—á—É
                </button>
                <button class="chip" data-filter-w="random">–°–ª—É—á–∞–π–Ω—ã–µ</button>
                <button class="chip" data-filter-w="due">
                  ‚è∞ –ö –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—é <span class="due-pill" id="due-pill">0</span>
                </button>
              </div>
            </div>
            <div class="setup-row">
              <label>üîä –ê–≤—Ç–æ–ø—Ä–æ–∏–∑–Ω–æ—à–µ–Ω–∏–µ</label>
              <div class="chip-group">
                <button class="chip on" data-autopron="on">–í–∫–ª—é—á–µ–Ω–æ</button>
                <button class="chip" data-autopron="off">–í—ã–∫–ª—é—á–µ–Ω–æ</button>
              </div>
            </div>
            <div class="setup-row">
              <label>üîÑ –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</label>
              <div class="chip-group">
                <button class="chip on" data-dir="both">EN + RU</button>
                <button class="chip" data-dir="en-ru">EN ‚Üí RU</button>
                <button class="chip" data-dir="ru-en">RU ‚Üí EN</button>
              </div>
            </div>
            <button
              class="btn btn-primary btn-lg"
              id="start-btn"
              style="width: 100%; margin-top: 0.5rem"
            >
              üöÄ –ù–∞—á–∞—Ç—å!
            </button>
          </div>

          <div id="practice-ex" style="display: none">
            <div class="ex-wrap">
              <button class="ex-exit-btn" id="ex-exit-btn">‚úï –≤—ã–π—Ç–∏</button>
              <div class="ex-progress">
                <div class="ex-progress-info">
                  <span id="ex-counter">1 / 10</span>
                  <span id="ex-type-lbl"></span>
                </div>
                <div class="prog-bar">
                  <div class="prog-fill" id="prog-fill" style="width: 0%"></div>
                </div>
              </div>
              <div id="ex-content"></div>
              <div class="ex-btns" id="ex-btns"></div>
              <div class="hotkeys-hint" id="hotkeys-hint" style="display: none">
                <span class="hk"
                  ><kbd>Space</kbd>/<kbd>F</kbd> –ø–µ—Ä–µ–≤–µ—Ä–Ω—É—Ç—å</span
                >
                <span class="hk"><kbd>Y</kbd>/<kbd>‚Üí</kbd> –ó–Ω–∞–ª</span>
                <span class="hk"><kbd>N</kbd>/<kbd>‚Üê</kbd> –ù–µ –∑–Ω–∞–ª</span>
                <span class="hk"><kbd>1‚Äì4</kbd> –≤—ã–±–æ—Ä</span>
                <span class="hk"><kbd>P</kbd> üîä</span>
              </div>
            </div>
          </div>

          <div id="practice-results" style="display: none">
            <div class="results-card">
              <div class="results-score" id="r-score">‚Äî</div>
              <div class="results-label" id="r-label">—Å–ª–æ–≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ</div>
              <svg
                class="results-ring"
                width="130"
                height="130"
                id="r-ring"
                style="margin: 0 auto 1.5rem; display: block"
              ></svg>
              <div class="breakdown" id="r-breakdown">
                <div class="breakdown-col">
                  <h4>‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ</h4>
                  <ul class="breakdown-list" id="r-correct"></ul>
                </div>
                <div class="breakdown-col">
                  <h4>‚ùå –û—à–∏–±–∫–∏</h4>
                  <ul class="breakdown-list" id="r-wrong"></ul>
                </div>
              </div>
              <div
                style="
                  display: flex;
                  gap: 0.75rem;
                  justify-content: center;
                  flex-wrap: wrap;
                "
              >
                <button class="btn btn-primary btn-lg" id="again-btn">
                  üîÑ –ï—â—ë —Ä–∞–∑
                </button>
                <button class="btn btn-secondary btn-lg" id="setup-btn">
                  ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- TAB: STATS -->
      <div class="tab-pane" id="tab-stats">
        <div class="section-title">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</div>
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-num" id="st-total">0</div>
            <div class="stat-lbl">–í—Å–µ–≥–æ —Å–ª–æ–≤</div>
          </div>
          <div class="stat-card">
            <div class="stat-num" id="st-learned">0</div>
            <div class="stat-lbl">–í—ã—É—á–µ–Ω–æ</div>
            <div class="stat-prog">
              <div
                class="stat-prog-fill"
                id="st-learned-bar"
                style="width: 0%"
              ></div>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-num" id="st-streak">0</div>
            <div class="stat-lbl">üî• –î–Ω–µ–π –ø–æ–¥—Ä—è–¥</div>
          </div>
          <div class="stat-card">
            <div class="stat-num" id="st-week">0</div>
            <div class="stat-lbl">–î–æ–±–∞–≤–ª–µ–Ω–æ –∑–∞ –Ω–µ–¥–µ–ª—é</div>
          </div>
          <div class="stat-card srs-hl">
            <div class="stat-num" id="st-due" style="color: var(--danger)">
              0
            </div>
            <div class="stat-lbl">‚è∞ –ö –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—é</div>
          </div>
        </div>
        <div class="sparkline-wrap">
          <h3>üìÖ –°–ª–æ–≤–∞ –ø–æ –¥–Ω—è–º (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π)</h3>
          <svg
            class="spark-svg"
            id="spark-svg"
            viewBox="0 0 400 80"
            preserveAspectRatio="none"
          ></svg>
          <div class="spark-labels" id="spark-labels"></div>
        </div>

        <!-- XP + Badges -->
        <div class="xp-stats-row">
          <div>
            <div class="xp-big" id="st-level">–£—Ä–æ–≤–µ–Ω—å 1</div>
            <div class="xp-sub">–¢–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å</div>
          </div>
          <div>
            <div class="xp-big" id="st-xp" style="font-size: 1.2rem">
              0/100 XP
            </div>
            <div class="xp-sub">–î–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ —É—Ä–æ–≤–Ω—è</div>
          </div>
        </div>
        <div class="badges-section">
          <h3>üèÖ –ë–µ–π–¥–∂–∏</h3>
          <div class="badges-grid" id="badges-grid"></div>
        </div>

        <!-- Speech settings in stats -->
        <div class="speech-settings">
          <h3>üîä –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–∏–∑–Ω–æ—à–µ–Ω–∏—è</h3>
          <div id="no-speech-stats" class="no-speech" style="display: none">
            –°–∏–Ω—Ç–µ–∑ —Ä–µ—á–∏ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –±—Ä–∞—É–∑–µ—Ä–æ–º
          </div>
          <div id="speech-controls">
            <div class="speech-row" style="margin-bottom: 0.75rem">
              <label>–ê–∫—Ü–µ–Ω—Ç</label>
              <select id="accent-select" class="form-control">
                <option value="US">üá∫üá∏ American (US)</option>
                <option value="UK">üá¨üáß British (UK)</option>
                <option value="all">üåç –í—Å–µ –≥–æ–ª–æ—Å–∞</option>
              </select>
            </div>
            <div class="speech-row" style="margin-bottom: 0.75rem">
              <label>–ì–æ–ª–æ—Å</label>
              <select id="voice-select" class="form-control"></select>
            </div>
            <div class="speech-row" style="margin-bottom: 0.75rem">
              <label>–°–∫–æ—Ä–æ—Å—Ç—å</label>
              <input
                class="form-control"
                type="range"
                id="speed-range"
                min="0.5"
                max="1.5"
                step="0.1"
                value="0.9"
              />
              <span id="speed-val" style="font-weight: 700; min-width: 30px"
                >0.9x</span
              >
            </div>
            <div class="speech-row" style="margin-bottom: 0.75rem">
              <label>–í—ã—Å–æ—Ç–∞</label>
              <input
                class="form-control"
                type="range"
                id="pitch-range"
                min="0.5"
                max="2"
                step="0.1"
                value="1"
              />
              <span id="pitch-val" style="font-weight: 700; min-width: 30px"
                >1.0</span
              >
            </div>
            <div class="voice-test">
              <button class="btn btn-secondary" id="test-voice-btn">
                üîä –¢–µ—Å—Ç –≥–æ–ª–æ—Å–∞
              </button>
              <span
                style="
                  color: var(--muted);
                  font-size: 0.85rem;
                  font-weight: 600;
                "
                >–ø–æ—Å–ª—É—à–∞–π –∫–∞–∫ –∑–≤—É—á–∏—Ç</span
              >
            </div>
          </div>
        </div>

        <div class="word-lists">
          <div class="word-list-card">
            <h3>üí™ –¢–æ–ø-5 —Å–ª–æ–∂–Ω—ã—Ö</h3>
            <ul class="wlist" id="st-hard"></ul>
          </div>
          <div class="word-list-card">
            <h3>üåü –¢–æ–ø-5 –ª—ë–≥–∫–∏—Ö</h3>
            <ul class="wlist" id="st-easy"></ul>
          </div>
        </div>
      </div>
    </main>

    <div class="modal-backdrop" id="del-modal">
      <div class="modal-box">
        <h3>–£–¥–∞–ª–∏—Ç—å —Å–ª–æ–≤–æ?</h3>
        <p>–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.</p>
        <div class="modal-actions">
          <button class="btn btn-secondary" id="del-cancel">–û—Ç–º–µ–Ω–∞</button>
          <button class="btn btn-danger" id="del-confirm">üóë –£–¥–∞–ª–∏—Ç—å</button>
        </div>
      </div>
    </div>

    <div id="toast-box"></div>

    <!-- Import/Export Modal -->
    <div class="io-modal-overlay" id="io-modal">
      <div class="io-modal">
        <h3 id="io-modal-title">üì¶ –ò–º–ø–æ—Ä—Ç / –≠–∫—Å–ø–æ—Ä—Ç</h3>
        <div id="io-export-view">
          <div class="io-btn-group">
            <button class="io-btn" id="io-export-json">
              üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–æ–ª–Ω—ã–π –±—ç–∫–∞–ø (JSON)
              <span class="io-btn-sub"
                >–í—Å–µ —Å–ª–æ–≤–∞ + SRS –ø—Ä–æ–≥—Ä–µ—Å—Å + XP + –±–µ–π–¥–∂–∏</span
              >
            </button>
            <button class="io-btn" id="io-export-csv">
              üìÑ –≠–∫—Å–ø–æ—Ä—Ç —Å–ª–æ–≤ –≤ CSV
              <span class="io-btn-sub"
                >–¢–æ–ª—å–∫–æ —Å–ª–æ–≤–∞: –∞–Ω–≥–ª–∏–π—Å–∫–∏–π, —Ä—É—Å—Å–∫–∏–π, –ø—Ä–∏–º–µ—Ä, —Ç–µ–≥–∏</span
              >
            </button>
            <button class="io-btn" id="io-export-anki">
              üÉè –≠–∫—Å–ø–æ—Ä—Ç –≤ Anki (TSV)
              <span class="io-btn-sub"
                >–°–æ–≤–º–µ—Å—Ç–∏–º–æ —Å Anki: Import ‚Üí Fields separated by Tab</span
              >
            </button>
            <button class="io-btn" id="io-to-import">
              ‚¨ÜÔ∏è –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–ª–æ–≤–∞...
              <span class="io-btn-sub">–ó–∞–≥—Ä—É–∑–∏—Ç—å JSON-–±—ç–∫–∞–ø –∏–ª–∏ CSV-—Ñ–∞–π–ª</span>
            </button>
          </div>
          <button class="io-close" id="io-close-export">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
        <div id="io-import-view" style="display: none">
          <div class="io-drop-zone" id="io-drop-zone">
            üóÇÔ∏è –ü–µ—Ä–µ—Ç–∞—â–∏ —Ñ–∞–π–ª —Å—é–¥–∞<br />–∏–ª–∏ –Ω–∞–∂–º–∏ –¥–ª—è –≤—ã–±–æ—Ä–∞<br />
            <span style="font-size: 0.75rem; margin-top: 0.3rem; display: block"
              >–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è: .json (–±—ç–∫–∞–ø) ¬∑ .csv (—Å–ª–æ–≤–∞)</span
            >
          </div>
          <input
            class="form-control"
            type="file"
            id="io-file-input"
            accept=".json,.csv"
            style="display: none"
          />
          <div
            id="io-import-info"
            style="
              font-size: 0.8rem;
              color: var(--muted);
              margin-bottom: 0.75rem;
              display: none;
            "
          ></div>
          <div
            class="io-btn-group"
            id="io-import-actions"
            style="display: none"
          >
            <button class="io-btn" id="io-confirm-import">
              ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∏–º–ø–æ—Ä—Ç
            </button>
          </div>
          <button class="io-close" id="io-back-btn">‚Üê –ù–∞–∑–∞–¥</button>
        </div>
      </div>
    </div>
    <!-- Import/Export Modal -->
    <!-- AUTH MODAL -->
    <div class="modal-backdrop" id="auth-modal">
      <div class="modal-box" style="max-width: 380px">
        <h3 id="auth-modal-title">–í–æ–π—Ç–∏</h3>
        <div class="form-group">
          <label>Email</label>
          <input
            class="form-control"
            type="email"
            id="auth-email"
            placeholder="you@example.com"
            autocomplete="email"
          />
        </div>
        <div class="form-group">
          <label>–ü–∞—Ä–æ–ª—å</label>
          <div class="password-field-wrapper">
            <input
              class="form-control"
              type="password"
              id="auth-password"
              placeholder="–ú–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤"
              autocomplete="current-password"
            />
            <button
              type="button"
              class="password-toggle"
              id="auth-password-toggle"
            >
              üëÅÔ∏è
            </button>
          </div>
        </div>
        <div class="form-group" id="auth-confirm-group" style="display: none">
          <label>–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å</label>
          <div class="password-field-wrapper">
            <input
              class="form-control"
              type="password"
              id="auth-confirm-password"
              placeholder="–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–∞—Ä–æ–ª—å"
              autocomplete="new-password"
            />
            <button
              type="button"
              class="password-toggle"
              id="auth-confirm-toggle"
            >
              üëÅÔ∏è
            </button>
          </div>
        </div>
        <div
          id="auth-error"
          style="
            color: var(--danger);
            font-size: 0.85rem;
            font-weight: 700;
            min-height: 1.2rem;
            margin-bottom: 0.75rem;
          "
        ></div>
        <div class="modal-actions" style="flex-direction: column; gap: 0.5rem">
          <button
            class="btn btn-primary"
            style="width: 100%"
            id="auth-submit-btn"
          >
            –í–æ–π—Ç–∏
          </button>
          <button
            class="btn btn-secondary"
            style="width: 100%"
            id="auth-toggle-btn"
          >
            –ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
          </button>
          <button
            class="btn"
            style="width: 100%; color: var(--muted)"
            id="auth-close-btn"
          >
            –û—Ç–º–µ–Ω–∞
          </button>
        </div>
      </div>
    </div>

    <!-- –ë–ª–æ–∫ –¥–ª—è –Ω–µ–ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω–æ–≥–æ email -->
    <div
      class="email-not-verified"
      id="email-not-verified"
      style="display: none"
    >
      <div class="auth-gate-container">
        <h2 style="margin-bottom: 1rem">üìß –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ email</h2>
        <p style="margin-bottom: 1rem">
          –ù–∞ –∞–¥—Ä–µ—Å <strong id="unverified-email"></strong> –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –ø–∏—Å—å–º–æ —Å
          —Å—Å—ã–ª–∫–æ–π –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.
        </p>
        <p style="margin-bottom: 1.5rem">
          –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ —Å—Å—ã–ª–∫–µ –≤ –ø–∏—Å—å–º–µ, —á—Ç–æ–±—ã –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç.
        </p>
        <div style="display: flex; gap: 1rem; justify-content: center">
          <button class="btn btn-secondary" id="resend-email-btn">
            –û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–∏—Å—å–º–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ
          </button>
          <button class="btn btn-primary" id="logout-from-unverified">
            –í—ã–π—Ç–∏
          </button>
        </div>
      </div>
    </div>
  </body>
</html>
